(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/leaving/leaving"],{2018:function(t,e,n){"use strict";n.r(e);var o=n("ad88"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},4493:function(t,e,n){},"6dcc":function(t,e,n){"use strict";var o=n("4493"),i=n.n(o);i.a},9730:function(t,e,n){"use strict";n.r(e);var o=n("c8e4"),i=n("2018");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("6dcc");var s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"3bbc2a86",null,!1,o["a"],void 0);e["default"]=c.exports},ad88:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("d5a9")),a=o(n("93aa")),s={components:{tmSkeleton:function(){n.e("tm-vuetify/components/tm-skeleton/tm-skeleton").then(function(){return resolve(n("3f1b"))}.bind(null,n)).catch(n.oe)},tmFlotbutton:function(){Promise.all([n.e("common/vendor"),n.e("tm-vuetify/components/tm-flotbutton/tm-flotbutton")]).then(function(){return resolve(n("1902"))}.bind(null,n)).catch(n.oe)},tmTranslate:function(){n.e("tm-vuetify/components/tm-translate/tm-translate").then(function(){return resolve(n("c684"))}.bind(null,n)).catch(n.oe)},tmEmpty:function(){n.e("tm-vuetify/components/tm-empty/tm-empty").then(function(){return resolve(n("947c"))}.bind(null,n)).catch(n.oe)},tmPoup:function(){n.e("tm-vuetify/components/tm-poup/tm-poup").then(function(){return resolve(n("2b9f"))}.bind(null,n)).catch(n.oe)},tmButton:function(){n.e("tm-vuetify/components/tm-button/tm-button").then(function(){return resolve(n("9bbf"))}.bind(null,n)).catch(n.oe)},commentItem:function(){n.e("components/comment-item/comment-item").then(function(){return resolve(n("7cdb"))}.bind(null,n)).catch(n.oe)}},data:function(){return{loading:"loading",queryParams:{size:10,page:0},result:null,dataList:[],isLoadMore:!1,loadMoreText:"加载中...",sheetId:a.default[i.default.SHEET_LEAVING],commentDetail:{loading:"loading",show:!1,comment:{},postId:void 0,list:[]}}},onLoad:function(){this.fnSetPageTitle("留言板")},created:function(){var e=this;this.fnGetData(),t.$on("leaving_refresh",(function(){e.fnGetData()}))},onPullDownRefresh:function(){this.isLoadMore=!1,this.queryParams.page=0,this.fnGetData()},onReachBottom:function(e){this.result.hasNext?(this.queryParams.page+=1,this.isLoadMore=!0,this.fnGetData()):t.showToast({icon:"none",title:"没有更多数据了"})},methods:{fnGetData:function(){var e=this;t.showLoading({mask:!0,title:"加载中..."}),this.isLoadMore||(this.loading="loading"),this.loadMoreText="加载中...",this.$httpApi.getSheetsCommentsTreeBySheetId(this.sheetId,this.queryParams).then((function(t){200==t.status?(e.loading="success",e.loadMoreText=t.data.hasNext?"上拉加载更多":"呜呜，没有更多数据啦~",e.result=t.data,e.isLoadMore?e.dataList=e.dataList.concat(t.data.content):e.dataList=t.data.content):(e.loading="error",e.loadMoreText="加载失败，请下拉刷新！")})).catch((function(t){console.error(t),e.loading="error",e.loadMoreText="加载失败，请下拉刷新！"})).finally((function(){setTimeout((function(){t.hideLoading(),t.stopPullDownRefresh()}),500)}))},fnToComment:function(e){var n={};n=e?{id:this.sheetId,parentId:e.comment.id,title:e.comment.author,from:"sheets",formPage:"leaving",type:"user"}:{id:this.sheetId,parentId:0,title:"留言板留言",from:"sheets",formPage:"leaving",type:"post"},t.$tm.vx.commit("comment/setCommentInfo",n),this.$Router.push({path:"/pagesA/comment/comment",query:n})},fnCopyContent:function(e){t.$tm.u.setClipboardData(e),t.$tm.toast("内容已复制成功！")},fnOnShowCommentDetail:function(t){this.commentDetail.comment=t,this.commentDetail.list=[],this.commentDetail.show=!0,this.fnGetChildComments()},fnGetChildComments:function(){var t=this;this.commentDetail.loading="loading",this.$httpApi.getSheetsChildrenCommentList(this.sheetId,this.commentDetail.comment.id,{}).then((function(e){200==e.status?(t.commentDetail.loading="success",t.commentDetail.list=e.data):t.commentDetail.loading="error"})).catch((function(e){t.commentDetail.loading="error"}))}}};e.default=s}).call(this,n("543d")["default"])},c8e4:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={commentItem:function(){return n.e("components/comment-item/comment-item").then(n.bind(null,"7cdb"))}},i=function(){var t=this.$createElement,e=(this._self._c,"success"==this.loading?this.dataList.length:null),n="success"==this.loading?this.dataList.length:null,o="success"==this.commentDetail.loading?this.commentDetail.list.length:null;this.$mp.data=Object.assign({},{$root:{g0:e,g1:n,g2:o}})},a=[]},df59:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("1ea4");o(n("66fd"));var i=o(n("9730"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["df59","common/runtime","common/vendor"]]]);