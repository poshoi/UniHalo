(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/comment/comment"],{"398a":function(t,n,o){"use strict";o.r(n);var e=o("a1f0"),i=o("4f9d");for(var r in i)["default"].indexOf(r)<0&&function(t){o.d(n,t,(function(){return i[t]}))}(r);o("4da0");var a=o("f0c5"),s=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,"ea0786b0",null,!1,e["a"],void 0);n["default"]=s.exports},"39de":function(t,n,o){"use strict";(function(t,n){var e=o("4ea4");o("1ea4");e(o("66fd"));var i=e(o("398a"));t.__webpack_require_UNI_MP_PLUGIN__=o,n(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"4da0":function(t,n,o){"use strict";var e=o("d238"),i=o.n(e);i.a},"4f9d":function(t,n,o){"use strict";o.r(n);var e=o("cf52"),i=o.n(e);for(var r in e)["default"].indexOf(r)<0&&function(t){o.d(n,t,(function(){return e[t]}))}(r);n["default"]=i.a},a1f0:function(t,n,o){"use strict";o.d(n,"b",(function(){return e})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){}));var e=function(){var t=this.$createElement;this._self._c},i=[]},cf52:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={components:{tmForm:function(){Promise.all([o.e("common/vendor"),o.e("tm-vuetify/components/tm-form/tm-form")]).then(function(){return resolve(o("77a7"))}.bind(null,o)).catch(o.oe)},tmInput:function(){o.e("tm-vuetify/components/tm-input/tm-input").then(function(){return resolve(o("7908"))}.bind(null,o)).catch(o.oe)},tmSwitch:function(){o.e("tm-vuetify/components/tm-switch/tm-switch").then(function(){return resolve(o("04fb"))}.bind(null,o)).catch(o.oe)},tmButton:function(){o.e("tm-vuetify/components/tm-button/tm-button").then(function(){return resolve(o("9bbf"))}.bind(null,o)).catch(o.oe)}},data:function(){return{params:{postId:"",parentId:"",title:"",form:"",formPage:"",type:"post"},form:{allowNotification:!0,author:"",avatar:"",authorUrl:"",content:"",email:"",parentId:0,postId:0}}},computed:{wxLoginVisitorUser:function(){return t.$tm.vx.getters().getWxLoginInfo}},onLoad:function(){this.params=this.$Route.query,this.form.postId=this.params.id,"user"==this.params.type?(this.form.parentId=this.params.parentId,this.fnSetPageTitle("回复用户："+this.params.title)):(this.form.parentId=0,this.fnSetPageTitle(this.params.title)),this.form.author=this.wxLoginVisitorUser.nickName,this.form.avatar=this.wxLoginVisitorUser.avatarUrl,this.form.email=this.wxLoginVisitorUser.email,this.form.authorUrl=this.wxLoginVisitorUser.url},methods:{fnOnSubmit:function(n){return!1===n?t.$tm.toast("请检查所有的必填项是否填写完整！"):this.form.allowNotification&&!this.form.email?t.$tm.toast("未填写邮箱地址，将无法接收提醒！"):this.form.email&&!t.$tm.test.email(this.form.email)?t.$tm.toast("请填写正确的邮箱地址！"):this.form.authorUrl&&!t.$tm.test.url(this.form.authorUrl)?t.$tm.toast("请输入正确的Url地址！"):void this.fnHandle()},fnHandle:function(){var n=this;t.showLoading({title:"正在提交..."});var o={sheets:this.$httpApi.postSheetsComments,posts:this.$httpApi.postCommentPost};o[this.params.from](this.form).then((function(o){200==o.status?(t.$tm.toast("提交成功，待博主审核通过后即可展示！"),t.$tm.vx.commit("user/setWxLoginInfo",{avatarUrl:n.wxLoginVisitorUser.avatarUrl,nickName:n.form.author,email:n.form.email,url:n.form.authorUrl}),n.form.content=""):t.$tm.toast("操作失败，请重试！")})).catch((function(n){t.$tm.toast(n.message)}))}}};n.default=e}).call(this,o("543d")["default"])},d238:function(t,n,o){}},[["39de","common/runtime","common/vendor"]]]);