(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/tags/tags"],{"08a9":function(t,n,e){},"25ea":function(t,n,e){"use strict";e.r(n);var o=e("305b"),i=e.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},"27a5":function(t,n,e){"use strict";e.r(n);var o=e("c740"),i=e("25ea");for(var c in i)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(c);e("28f2");var a=e("f0c5"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"36ef7ebc",null,!1,o["a"],void 0);n["default"]=s.exports},"28f2":function(t,n,e){"use strict";var o=e("08a9"),i=e.n(o);i.a},"305b":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={components:{tmSkeleton:function(){e.e("tm-vuetify/components/tm-skeleton/tm-skeleton").then(function(){return resolve(e("3f1b"))}.bind(null,e)).catch(e.oe)},tmButton:function(){e.e("tm-vuetify/components/tm-button/tm-button").then(function(){return resolve(e("9bbf"))}.bind(null,e)).catch(e.oe)},tmEmpty:function(){e.e("tm-vuetify/components/tm-empty/tm-empty").then(function(){return resolve(e("947c"))}.bind(null,e)).catch(e.oe)},tmTabs:function(){Promise.all([e.e("common/vendor"),e.e("tm-vuetify/components/tm-tabs/tm-tabs")]).then(function(){return resolve(e("61fe"))}.bind(null,e)).catch(e.oe)},tmTranslate:function(){e.e("tm-vuetify/components/tm-translate/tm-translate").then(function(){return resolve(e("c684"))}.bind(null,e)).catch(e.oe)},tmFlotbutton:function(){Promise.all([e.e("common/vendor"),e.e("tm-vuetify/components/tm-flotbutton/tm-flotbutton")]).then(function(){return resolve(e("1902"))}.bind(null,e)).catch(e.oe)},tmTags:function(){e.e("tm-vuetify/components/tm-tags/tm-tags").then(function(){return resolve(e("0783"))}.bind(null,e)).catch(e.oe)},tmPoup:function(){e.e("tm-vuetify/components/tm-poup/tm-poup").then(function(){return resolve(e("2b9f"))}.bind(null,e)).catch(e.oe)},tmInput:function(){e.e("tm-vuetify/components/tm-input/tm-input").then(function(){return resolve(e("7908"))}.bind(null,e)).catch(e.oe)},tColorPicker:function(){e.e("components/t-color-picker/t-color-picker").then(function(){return resolve(e("3a8b"))}.bind(null,e)).catch(e.oe)},AttachmentSelect:function(){Promise.all([e.e("common/vendor"),e.e("components/attachment-select/attachment-select")]).then(function(){return resolve(e("eccf"))}.bind(null,e)).catch(e.oe)}},data:function(){return{loading:"loading",queryParams:{size:10,page:0,more:!0},dataList:[],poupShow:!1,selectColor:{r:255,g:255,b:255,a:1},attachmentsSelectShow:!1,form:{color:void 0,createTime:void 0,fullPath:void 0,id:void 0,name:"",slug:void 0,thumbnail:void 0,showThumbnail:void 0}}},onLoad:function(){this.fnSetPageTitle("标签管理")},created:function(){this.fnGetData()},onPullDownRefresh:function(){this.isLoadMore=!1,this.queryParams.page=0,this.fnGetData()},methods:{fnGetData:function(){var n=this;t.showLoading({mask:!0,title:"加载中..."}),this.isLoadMore||(this.loading="loading"),this.loadMoreText="加载中...",this.$httpApi.admin.getTagsList(this.queryParams).then((function(t){n.loading="success",n.dataList=t.data.map((function(t){return t.thumbnail?t["showThumbnail"]=n.$utils.checkThumbnailUrl(t.thumbnail):t["showThumbnail"]="",t}))})).catch((function(t){console.error(t),n.loading="error",n.loadMoreText="加载失败，请下拉刷新！"})).finally((function(){setTimeout((function(){t.hideLoading(),t.stopPullDownRefresh()}),800)}))},fnSelectColor:function(){this.$refs.colorPicker.open()},fnOnConfirmSelectColor:function(t){this.selectColor=t.rgba,this.$set(this.form,"color",t.hex)},fnOnAttachmentsSelectClose:function(){this.attachmentsSelectShow=!1,console.log("this.attachmentsSelectShow",this.attachmentsSelectShow)},fnOnPoupChange:function(t){t||this.fnResetForm()},fnOnAttachmentsSelect:function(t){this.form.thumbnail=t.path,this.form.showThumbnail=this.$utils.checkThumbnailUrl(t.path),this.attachmentsSelectShow=!1},fnShowFormModal:function(t){t?(this.form=Object.assign({},{},t),t.thumbnail&&(this.form.showThumbnail=this.$utils.checkThumbnailUrl(t.thumbnail))):this.fnResetForm(),this.poupShow=!0},fnResetForm:function(){this.form={color:void 0,createTime:void 0,fullPath:void 0,id:void 0,name:"",slug:void 0,thumbnail:void 0,showThumbnail:void 0}},fnSubmit:function(){var n=this;if(""==this.form.name.trim())return t.$tm.toast("标签名称未填写！");void 0==this.form.id?this.$httpApi.admin.createTags(this.form).then((function(n){200==n.status?(t.$tm.toast("保存成功！"),t.startPullDownRefresh()):t.$tm.toast("操作失败，请重试！")})).catch((function(n){t.$tm.toast("操作失败，请重试！")})):this.$httpApi.admin.updateTagsById(this.form.id,this.form).then((function(e){if(200==e.status){t.$tm.toast("保存成功！");var o=n.dataList.findIndex((function(t){return t.id==n.form.id}));n.$set(n.dataList,o,n.form)}else t.$tm.toast("操作失败，请重试！")})).catch((function(n){t.$tm.toast("操作失败，请重试！")}))},fnDelete:function(n){var e=this,o=n||this.form;t.$eShowModal({title:"提示",content:"您是否要将 ".concat(o.name," 的标签删除？"),showCancel:!0,cancelText:"否",cancelColor:"#999999",confirmText:"是",confirmColor:"#03a9f4"}).then((function(n){e.$httpApi.admin.deleteTagsById(o.id).then((function(n){if(200==n.status){t.$tm.toast("".concat(o.name," 标签已删除！"));var i=e.dataList.findIndex((function(t){return t.id==o.id}));e.dataList.splice(i,1)}else t.$tm.toast("操作失败，请重试！")})).catch((function(n){t.$tm.toast("操作失败，请重试！")}))})).catch((function(t){}))}}};n.default=o}).call(this,e("543d")["default"])},c740:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={tColorPicker:function(){return e.e("components/t-color-picker/t-color-picker").then(e.bind(null,"3a8b"))},attachmentSelect:function(){return Promise.all([e.e("common/vendor"),e.e("components/attachment-select/attachment-select")]).then(e.bind(null,"eccf"))}},i=function(){var t=this,n=t.$createElement,e=(t._self._c,"success"==t.loading?t.dataList.length:null);t._isMounted||(t.e0=function(n){t.attachmentsSelectShow=!0},t.e1=function(n){t.attachmentsSelectShow=!0},t.e2=function(n){t.poupShow=!1}),t.$mp.data=Object.assign({},{$root:{g0:e}})},c=[]},d44f:function(t,n,e){"use strict";(function(t,n){var o=e("4ea4");e("1ea4");o(e("66fd"));var i=o(e("27a5"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])}},[["d44f","common/runtime","common/vendor"]]]);