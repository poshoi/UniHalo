(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/home/home"],{"1fd9":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{tmMenubars:function(){n.e("tm-vuetify/components/tm-menubars/tm-menubars").then(function(){return resolve(n("3042"))}.bind(null,n)).catch(n.oe)},tmSkeleton:function(){n.e("tm-vuetify/components/tm-skeleton/tm-skeleton").then(function(){return resolve(n("3f1b"))}.bind(null,n)).catch(n.oe)},tmTranslate:function(){n.e("tm-vuetify/components/tm-translate/tm-translate").then(function(){return resolve(n("c684"))}.bind(null,n)).catch(n.oe)},tmFlotbutton:function(){Promise.all([n.e("common/vendor"),n.e("tm-vuetify/components/tm-flotbutton/tm-flotbutton")]).then(function(){return resolve(n("1902"))}.bind(null,n)).catch(n.oe)},tmIcons:function(){n.e("tm-vuetify/components/tm-icons/tm-icons").then(function(){return resolve(n("86fa"))}.bind(null,n)).catch(n.oe)},tmEmpty:function(){n.e("tm-vuetify/components/tm-empty/tm-empty").then(function(){return resolve(n("947c"))}.bind(null,n)).catch(n.oe)},eSwiper:function(){n.e("components/e-swiper/e-swiper").then(function(){return resolve(n("2747"))}.bind(null,n)).catch(n.oe)}},data:function(){return{loading:"loading",queryParams:{size:10,page:0},result:{},isLoadMore:!1,loadMoreText:"加载中...",bannerCurrent:0,bannerList:[],noticeList:[],articleList:[],categoryList:[],useQuickNav:!1,quickNavList:[]}},computed:{bloggerInfo:function(){var t=this.$tm.vx.getters().getBlogger;return t.avatar=this.$utils.checkAvatarUrl(t.avatar,!0),t}},onLoad:function(){this.fnSetPageTitle(),this.useQuickNav=this.$haloConfig.quickNav.use},created:function(){this.fnQuery()},onPullDownRefresh:function(){this.isLoadMore=!1,this.queryParams.page=0,this.fnQuery()},onReachBottom:function(e){this.result.hasNext?(this.queryParams.page+=1,this.isLoadMore=!0,this.fnGetArticleList()):t.showToast({icon:"none",title:"没有更多数据了"})},methods:{fnQuery:function(){this.fnGetBanner(),this.fnGetArticleList(),this.fnGetCategoryList(),this.fnGetQuickNavList()},fnGetQuickNavList:function(){if(this.useQuickNav=this.$haloConfig.quickNav.use,this.$haloConfig.quickNav.use){var t=this.$haloConfig.quickNav.list;this.quickNavList=t.map((function(t){return t}))}},fnGetCategoryList:function(){var e=this;this.$httpApi.getCategoryList({more:!0}).then((function(t){e.categoryList=t.data.sort((function(t,e){return e.postCount-t.postCount})),setTimeout((function(){e.loading="success"}),500)})).catch((function(t){console.error(t),e.loading="error"})).finally((function(){setTimeout((function(){t.hideLoading(),t.stopPullDownRefresh()}),500)}))},fnGetBanner:function(){var e=this,n=this,i=function(e,i){return e.map((function(e,a){switch(i){case"list":return{id:a,nickname:n.bloggerInfo.nickname,avatar:n.bloggerInfo.avatar,address:e.href||"",title:e.title,image:n.$utils.checkImageUrl(e.thumbnail)};case"article":return{mp4:"",id:e.id,nickname:n.bloggerInfo.nickname,avatar:n.bloggerInfo.avatar,address:"",createTime:t.$tm.dayjs(e.createTime).fromNow(),title:e.title,src:n.$utils.checkImageUrl(e.thumbnail),image:n.$utils.checkImageUrl(e.thumbnail)};case"banner":return{id:"",src:e}}}))};switch(this.$haloConfig.banner.type){case"list":this.bannerList=i(this.$haloConfig.banner.list,"list");break;case"article":this.$httpApi.getPostList({page:0,size:6,sort:"topPriority,visits,desc"}).then((function(t){e.bannerList=i(t.data.content,"article"),0==e.bannerList.length&&(e.bannerList=i(e.$haloConfig.banner.list,"list"))}));break;case"banner":this.bannerList=i([],"banner");break}},fnOnBannerChange:function(t){this.bannerCurrent=t.current},fnOnBannerClick:function(t){""!=t.id&&this.fnToArticleDetail(t)},fnGetArticleList:function(){var e=this;t.showLoading({mask:!0,title:"加载中..."}),this.isLoadMore||(this.loading="loading"),this.loadMoreText="加载中...",this.$httpApi.getPostList(this.queryParams).then((function(t){e.loading="success",e.loadMoreText=t.data.hasNext?"上拉加载更多":"呜呜，没有更多数据啦~",e.result=t.data,e.isLoadMore?e.articleList=e.articleList.concat(t.data.content):e.articleList=t.data.content,e.loading="success"})).catch((function(n){e.loading="error",e.loadMoreText="加载失败，请下拉刷新！",t.$tm.toast(n.message||"数据加载失败！")})).finally((function(){t.hideLoading(),t.stopPullDownRefresh()}))},fnToArticleDetail:function(e){t.navigateTo({url:"/pagesA/article-detail/article-detail?articleId="+e.id,animationType:"slide-in-right"})},fnToNavPage:function(e){switch(e.type){case"tabbar":t.switchTab({url:e.path});break;case"page":t.navigateTo({url:e.path});break}},fnToCategoryPage:function(){t.switchTab({url:"/pages/tabbar/category/category"})},fnToArticlesPage:function(){t.navigateTo({url:"/pagesA/articles/articles"})},fnToCategoryBy:function(e){t.navigateTo({url:"/pagesA/category-detail/category-detail?slug=".concat(e.slug,"&name=").concat(e.name)})},fnChangeMode:function(){var e=this.$tm.vx.state().tmVuetify.black;this.$tm.theme.setBlack(!e),t.setNavigationBarColor({backgroundColor:e?"#ffffff":"#0a0a0a",frontColor:e?"#0a0a0a":"#ffffff"})},fnToSearch:function(){t.navigateTo({url:"/pagesA/articles/articles"})}}};e.default=i}).call(this,n("543d")["default"])},"67bb":function(t,e,n){"use strict";var i=n("f89a"),a=n.n(i);a.a},bf82:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={eSwiper:function(){return n.e("components/e-swiper/e-swiper").then(n.bind(null,"2747"))},categoryMiniCard:function(){return n.e("components/category-mini-card/category-mini-card").then(n.bind(null,"4433"))},articleCard:function(){return n.e("components/article-card/article-card").then(n.bind(null,"dc9b"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,"success"==t.loading?t.bannerList.length:null),i="success"==t.loading?t.categoryList.length:null,a="success"==t.loading?t.articleList.length:null,o="success"==t.loading&&0!=a?t.articleList.length:null;t._isMounted||(t.e0=function(e){return t.$tm.toast("以后会放一个彩蛋~")}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:a,g3:o}})},o=[]},cfeaf:function(t,e,n){"use strict";n.r(e);var i=n("bf82"),a=n("db33");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("67bb");var r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"c241350e",null,!1,i["a"],void 0);e["default"]=s.exports},db33:function(t,e,n){"use strict";n.r(e);var i=n("1fd9"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},e3a6:function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("1ea4");i(n("66fd"));var a=i(n("cfeaf"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},f89a:function(t,e,n){}},[["e3a6","common/runtime","common/vendor"]]]);