{"version":3,"sources":["webpack:////Users/zgj/project/uni-halo-master/tm-vuetify/components/tm-form/tm-form.vue?8482","webpack:////Users/zgj/project/uni-halo-master/tm-vuetify/components/tm-form/tm-form.vue?0450","webpack:////Users/zgj/project/uni-halo-master/tm-vuetify/components/tm-form/tm-form.vue?911b","webpack:////Users/zgj/project/uni-halo-master/tm-vuetify/components/tm-form/tm-form.vue?9e49","uni-app:///tm-vuetify/components/tm-form/tm-form.vue"],"names":["name","props","url","type","default","method","header","data","mounted","methods","findeChildren","item","t","jg","start","init","formSub","bdData","verify","i","tagname","rulst","uni","findeChildren_off","getFormData","su"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAq0B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOz1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA,gBASA;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;;IACA;IACAE;MACAH;MACAC;QACA;MACA;IACA;EACA;EACAG;IACA,QAEA;EACA;EACAC;IACA;MAAA;QAAA;UAAA;YAAA;cAMA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MAEA;QAAA;QACA;QAEA;UACA;QACA;QACA;UAEA;YAEAC;cAEAC;gBACAA;cACA;YACA;UAEA;YACA;cACAC;YACA;UACA;QACA;UACA;YACAF;cACAG;YACA;UACA;QACA;MAEA;MACAA;IAEA;IACAC;MACA;MAKA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAC;gBACAC;gBACAC;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBACAR;gBACAS;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACAH;gBAAA;gBAAA;cAAA;gBAAA,MACAG;kBAAA;kBAAA;gBAAA;gBAAA,KACAT;kBAAA;kBAAA;gBAAA;gBAAA,IAEAA;kBAAA;kBAAA;gBAAA;gBACAO;gBAAA;cAAA;gBAKAD;gBAAA;gBAAA;cAAA;gBACA;kBAEAA;gBACA;kBAEAA;gBACA;cAAA;gBArBAE;gBAAA;gBAAA;cAAA;gBAAA,MAwBAD;kBAAA;kBAAA;gBAAA;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAG;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAAD;gBAAA;gBAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAAD;cAAA;gBAEA;cAAA;gBAAA;gBAAA;cAAA;gBAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAE;MACA;MACA;MACA;MAEA;QAAA;QACA;QAEA;UACA;QACA;QACA;UAEA,6DAEA;YACA;cACAV;YACA;UACA;QACA;UACA;YACAF;cACAG;YACA;UACA;QACA;MAEA;MACAA;MACA;IAEA;IACA;IACAU;MACA;MACA;QACAZ;UACA;UAIA;UACA;UACA;UACA;YAAA;YACA;YACA;YACA;cACAK;YACA;cACAA;YACA;cAEAA;YACA;cAEAA;YACA;UACA;UACAQ;QACA;MACA;IAEA;EACA;AACA;AAAA,4B","file":"tm-vuetify/components/tm-form/tm-form.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./tm-form.vue?vue&type=template&id=14a8ec02&\"\nvar renderjs\nimport script from \"./tm-form.vue?vue&type=script&lang=js&\"\nexport * from \"./tm-form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"tm-vuetify/components/tm-form/tm-form.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-form.vue?vue&type=template&id=14a8ec02&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-form.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"tm-form fulled\">\n\t\t<slot></slot>\n\t</view>\n</template>\n\n<script>\n\t/**\n\t * 表单组件\n\t * @property {String} url = [] 提交时的网址。\n\t * @property {String} method = [POST | GET] 提交时的的方法\n\t * @property {Object} header = [] 提交时的头部对象数据\n\t * @property {Function} submit 验证成功会返回数据集合，验证失败返回false,点击提交按钮时触发。表单内部一定放一个tm-button，注意navtie-type=\"form\"表单专用属性,<tm-button navtie-type=\"form\">提交/tm-button>\n\t * @property {Function} request 请求成功触发的事件，返回请求的数据。\n\t * \n\t */\n\texport default {\n\t\tname:\"tm-form\",\n\t\tprops:{\n\t\t\t//提交时的网址。如果填写提交时，不会请求数据。\n\t\t\turl:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\t//请求方法\n\t\t\tmethod:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:'POST' //POST | GET\n\t\t\t},\n\t\t\t//头部数据\n\t\t\theader:{\n\t\t\t\ttype:Object,\n\t\t\t\tdefault:()=>{\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tthis.$nextTick(async function(){\n\t\t\t\t//#ifdef APP-VUE || APP-PLUS\n\t\t\t\t\n\t\t\t\tawait uni.$tm.sleep(50);\n\t\t\t\t\n\t\t\t\t//#endif\n\t\t\t\tthis.init()\n\t\t\t})\n\t\t},\n\t\tmethods: {\n\t\t\tfindeChildren(cl){\n\t\t\t\tlet t = this;\n\t\t\t\tlet mubiao = ['tm-input','tm-button','tm-groupradio','tm-groupcheckbox','tm-upload','tm-rate','tm-slider','tm-stepper','tm-switch']\n\t\t\t\tlet jg = [];\n\t\t\t\t\n\t\t\t\tfunction start(item){\n\t\t\t\t\tlet tag = item.$options?.name;\n\t\t\t\t\t\n\t\t\t\t\tlet index = mubiao.findIndex(citem=>{\n\t\t\t\t\t\treturn tag == citem;\n\t\t\t\t\t})\n\t\t\t\t\tif(index>-1){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(tag=='tm-button'&&item.$props.navtieType=='form'){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\titem.onclick = function(){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tt.$nextTick(function(){\n\t\t\t\t\t\t\t\t\tt.formSub(jg);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(tag!='tm-button'&&item.$props.name!=''){\n\t\t\t\t\t\t\t\tjg.push(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(Array.isArray(item.$children)){\n\t\t\t\t\t\t\titem.$children.forEach(zcl=>{\n\t\t\t\t\t\t\t\tstart(zcl)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tstart(cl);\n\t\t\t\t\n\t\t\t},\n\t\t\tinit() {\n\t\t\t\tlet cl = this;\n\t\t\t\t//#ifdef H5 || APP-VUE || APP-PLUS\n\t\t\t\tcl = this.$children[0];\n\t\t\t\t//#endif\n\t\t\t\t\n\t\t\t\tthis.$nextTick(function(){\n\t\t\t\t\tthis.findeChildren(cl);\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync formSub(cl){\n\t\t\t\t\n\t\t\t\tlet bdData={};\n\t\t\t\tlet verify=true;\n\t\t\t\tfor(let i=0;i<cl.length;i++){\n\t\t\t\t\tlet item = cl[i];\n\t\t\t\t\tlet tagname = item.$options?.name;\n\t\t\t\t\tif(tagname=='tm-upload'){\n\t\t\t\t\t\tbdData[item.$props.name] = item.getFile();\n\t\t\t\t\t}else if(tagname=='tm-input'){\n\t\t\t\t\t\tif(item.$props.required){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(!item.verifyInput()){\n\t\t\t\t\t\t\t\tverify=false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbdData[item.$props.name] = item.$props.value;\n\t\t\t\t\t}else if(tagname=='tm-groupradio' || tagname== 'tm-groupcheckbox'){\n\t\t\t\t\t\t\n\t\t\t\t\t\tbdData[item.$props.name] = item.getVal();\n\t\t\t\t\t}else if(tagname=='tm-slider' || tagname=='tm-stepper' ||  tagname=='tm-rate' ||  tagname=='tm-switch'){\n\t\t\t\t\t\t\n\t\t\t\t\t\tbdData[item.$props.name] = item.$props.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(verify===true){\n\t\t\t\t\tthis.$emit('submit',bdData)\n\t\t\t\t\tif(this.url!==\"\"){\n\t\t\t\t\t\tlet rulst = null;\n\t\t\t\t\t\tif(this.method.toLocaleLowerCase()=='get'){\n\t\t\t\t\t\t\trulst = await uni.$tm.request.get(this.url,bdData,this.header)\n\t\t\t\t\t\t}else if(this.method.toLocaleLowerCase()=='post'){\n\t\t\t\t\t\t\trulst = await uni.$tm.request.post(this.url,bdData,this.header)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$emit('request',rulst)\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.$emit('submit',false)\n\t\t\t\t}\n\t\t\t},\n\t\t\tfindeChildren_off(cl){\n\t\t\t\tlet t = this;\n\t\t\t\tlet mubiao = ['tm-input','tm-button','tm-groupradio','tm-groupcheckbox','tm-upload','tm-rate','tm-slider','tm-stepper','tm-switch']\n\t\t\t\tlet jg = [];\n\t\t\t\t\n\t\t\t\tfunction start(item){\n\t\t\t\t\tlet tag = item.$options?.name;\n\t\t\t\t\t\n\t\t\t\t\tlet index = mubiao.findIndex(citem=>{\n\t\t\t\t\t\treturn tag == citem;\n\t\t\t\t\t})\n\t\t\t\t\tif(index>-1){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(tag=='tm-button'&&item.$props.navtieType=='form'){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(tag!='tm-button'&&item.$props.name!=''){\n\t\t\t\t\t\t\t\tjg.push(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(Array.isArray(item.$children)){\n\t\t\t\t\t\t\titem.$children.forEach(zcl=>{\n\t\t\t\t\t\t\t\tstart(zcl)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tstart(cl);\n\t\t\t\treturn jg;\n\t\t\t\t\n\t\t\t},\n\t\t\t//手动获取当前表单对象数据，Promise风格。\n\t\t\tgetFormData(){\n\t\t\t\tlet t = this;\n\t\t\t\treturn new Promise((su,fl)=>{\n\t\t\t\t\tt.$nextTick(function(){\n\t\t\t\t\t\tlet clPren = t.$children[0];\n\t\t\t\t\t\t//#ifdef H5\n\t\t\t\t\t\tclPren = t.$children[0].$children[0].$children[0];\n\t\t\t\t\t\t//#endif\n\t\t\t\t\t\tlet cl = t.findeChildren_off(clPren);\n\t\t\t\t\t\tlet bdData={};\n\t\t\t\t\t\tlet verify=true;\n\t\t\t\t\t\tfor(let i=0;i<cl.length;i++){\n\t\t\t\t\t\t\tlet item = cl[i];\n\t\t\t\t\t\t\tlet tagname = item.$options?.name;\n\t\t\t\t\t\t\tif(tagname=='tm-upload'){\n\t\t\t\t\t\t\t\tbdData[item.$props.name] = item.getFile();\n\t\t\t\t\t\t\t}else if(tagname=='tm-input'){\n\t\t\t\t\t\t\t\tbdData[item.$props.name] = item.$props.value;\n\t\t\t\t\t\t\t}else if(tagname=='tm-groupradio' || tagname== 'tm-groupcheckbox'){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbdData[item.$props.name] = item.getVal();\n\t\t\t\t\t\t\t}else if(tagname=='tm-slider' || tagname=='tm-stepper' ||  tagname=='tm-rate' ||  tagname=='tm-switch'){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbdData[item.$props.name] = item.$props.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsu(bdData);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n"],"sourceRoot":""}