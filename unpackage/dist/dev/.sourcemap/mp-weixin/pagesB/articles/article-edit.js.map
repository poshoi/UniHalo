{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?31bd","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?d855","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?779a","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?5c1e","uni-app:///pagesB/articles/article-edit.vue","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?c2e2","webpack:////Users/zgj/project/uni-halo-master/pagesB/articles/article-edit.vue?f6fc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","mpHtml","tmSkeleton","tmButton","tmEmpty","tmTranslate","tmFlotbutton","tmSwitch","tmPoup","tmInput","attachmentSelect","data","loading","markdownConfig","queryParams","postsId","status","form","content","keepRaw","originalContent","formatContent","type","modal","editable","attachmentsSelect","title","show","dialog","emojis","templates","onLoad","onReady","then","uni","itemList","success","count","src","complete","resolve","arr","res","item","fail","reject","value","catch","methods","fnGetData","mask","getPostsById","console","fnRefreshData","showCancel","cancelText","cancelColor","confirmText","confirmColor","checkEditable","fnOnToolBarEdit","fnOnAttachmentsSelect","modalInput","modalConfirm","modalCancel","fnFileUpload","filePath","header","url","name","fnOnInsertHead","fnOnInsertTable","rows","cols","fnOnSaveInsertTable","fnOnInsertCode","fnOnInsertEmoji","fnOnOpenDialog","fnOnCloseDialog","fnOnPreview","_content","fnSaveAtPublish","path","query","postTitle","isEdit","from","updatePostsById","setTimeout","createPosts","fnClear"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA2zB,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkH/0B;AAEA;AAAA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAaA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAD;QACAL;MACA;MAEA;MACAO,SACA,wDACA,wDACA,uDACA;MACA;MACAC,YACA,iPACA,wMACA;IAEA;EACA;EACAC;IACA;IACA;MACA;MACA;IACA;MACA;MACA;MACA;IACA;EACA;EACAC;IAAA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;MACA;QACA,sBACAC;UACA;YACAC;cACAC;cACAC;gBACA;kBACA;kBACA;oBACAF;sBACAG;sBACAD;wBAEA;0BACA;0BACAzC;4BACA2C;4BACAC;8BACAL;gCACAR;8BACA;8BACA;gCACAQ;gCACAM;8BACA;4BACA;0BACA;wBACA;0BAEAN;4BACAR;0BACA;0BACA;4BAAA;4BAAA;8BAAA;gCAAA;kCAAA;oCACAe;oCAAA,uCACAC;oCAAA;oCAAA;kCAAA;oCAAA;sCAAA;sCAAA;oCAAA;oCAAAC;oCAAA;oCAAA,OAEA;kCAAA;oCAAAL;oCACAG;kCAAA;oCAAA;oCAAA;kCAAA;oCAAA;oCAAA;kCAAA;oCAAA;oCAAA;oCAAA;kCAAA;oCAAA;oCAAA;oCAAA;kCAAA;oCAAA,iCAEAA;kCAAA;kCAAA;oCAAA;gCAAA;8BAAA;4BAAA;0BAAA,CACA;4BACAP;4BACAM;0BACA;wBAEA;sBAEA;sBACAI;oBACA;kBACA;oBACAV;sBACAE;wBACAF;0BACAR;wBACA;wBACA;0BACAQ;0BACAM;wBACA;sBACA;sBACAI;oBACA;kBACA;gBACA;kBACA;kBACA;oBACAJ;oBACAK;kBACA;kBAEA;kBACA;gBACA;cACA;YACA;UACA;YACA;cACAL;cACAK;YACA;YACA;YACA;cACAnB;YACA;cACAA;YACA;YACA;cACAA;cACAJ;cACAwB;YACA;UACA;QACA,GACAC;MACA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MAAA;MACA;MACAf;QACAgB;QACAxB;MACA;MACA,oBACAyB,uCACAlB;QACA;UACA;UACA;UACA;YACA;cACA;YACA;UACA;UACA;UACAC;QACA;UACA;UACA;UACAA;QACA;MACA,GACAa;QACAK;QACA;QACA;QACAlB;MACA;IACA;IACAmB;MAAA;MAAA;MACA;QACAnB;UACAR;UACAR;UACAoC;UACAC;UACAC;UACAC;UACAC;QACA,GACAzB;UACA;QACA,GACAc;MACA;QACA;MACA;IACA;IACA;IACAY;MAAA;MACA;QACA;UACAnB;QACA;UACAN;YACAR;YACAR;YACAkB;cACA;gBACA;gBACAI;cACA;gBACAK;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAe;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;UACA;QACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA/B;UACAgC;UACAC;YACA;UACA;UACAC;UACAC;UACAjC;YACA;YACA;cACAI;YACA;cACAN;cACAW;YACA;UACA;UACAD;YACAV;YACAW;UACA;QACA;MACA;IACA;IAEA;IACAyB;MAAA;MACA,qBACArC;QACA;QACAtC;UACAwC;UACAC;YACA;YACA;UACA;QACA;MACA,GACAW;IACA;IACA;IACAwB;MAAA;MACA,qBACAtC;QACA;UACAP;UACAJ;UACAkD;UACAC;UACA3B;QACA;QACA;UACAN;YACA;UACA;UACAK;QACA;MACA,GACAE;IACA;IAEA;IACA2B;MACA;IACA;IACA;IACAC;MAAA;MACA,qBACA1C;QACAC;UACAC;UACAC;YACA;YACA;UACA;QACA;MACA,GACAW;IACA;IACA;IACA6B;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACA,qBACA5C;QACA;QACA;QACA;MACA,GACAc;IACA;IACA+B;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA7C;MACA;QACAA;QACA;QACA;UACA8C;QACA;QACA;QACA9C;MACA;IACA;IAEA;IACA+C;MACA/C;QACAgB;QACAxB;MACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACAQ;MACAA;MACA;QACA;UACAgD;UACAC;YAAApE;YAAAqE;YAAAC;YAAAC;UAAA;QACA;MACA;QACA;UAAAJ;UAAAC;YAAApE;YAAAqE;YAAAC;YAAAC;UAAA;QAAA;MACA;MAEA;MACA;QACA,oBACAC,yCACAtD;UACA;YACAC;YACAA;YAEAsD;cACAtD;YACA;UACA;YACAA;UACA;QACA,GACAa;UACAb;QACA;MACA;QACA,oBACAuD,uBACAxD;UACA;YACAC;YACAA;YACAsD;cACAtD;YACA;UACA;YACAA;UACA;QACA,GACAa;UACAb;QACA;MACA;IACA;IAEAwD;MAAA;MACAxD;QACAR;QACAR;QACAoC;QACAC;QACAC;QACAC;QACAC;MACA,GACAzB;QACA;QACAC;QACAA;QACA;MACA,GACAa;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9lBA;AAAA;AAAA;AAAA;AAAsiD,CAAgB,i8CAAG,EAAC,C;;;;;;;;;;;ACA1jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesB/articles/article-edit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesB/articles/article-edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./article-edit.vue?vue&type=template&id=488d2650&scoped=true&\"\nvar renderjs\nimport script from \"./article-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./article-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./article-edit.vue?vue&type=style&index=0&id=488d2650&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"488d2650\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesB/articles/article-edit.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./article-edit.vue?vue&type=template&id=488d2650&scoped=true&\"","var components\ntry {\n  components = {\n    attachmentSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/attachment-select/attachment-select\" */ \"@/components/attachment-select/attachment-select.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.attachmentsSelect.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./article-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./article-edit.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"app-page bg-white pa-12\">\n\t\t<!-- 工具栏区域 -->\n\t\t<view class=\"tool-bar-wrap e-fixed bg-white pt-12 pb-16 border-b-1\">\n\t\t\t<view class=\"tool-bar flex flex-center  text-grey-darken-2\">\n\t\t\t\t<text class=\"halohtmlicon icon-undo\" data-method=\"undo\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-redo\" data-method=\"redo\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-img\" data-method=\"insertImg\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-video\" data-method=\"insertVideo\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-link\" data-method=\"insertLink\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-text\" data-method=\"insertText\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-line\" data-method=\"insertHtml\" data-param=\"<hr style='margin:10px 0;'/>\" @click=\"fnOnToolBarEdit\"></text>\n\t\t\t</view>\n\t\t\t<view class=\"tool-bar flex flex-center  text-grey-darken-2 mt-16\">\n\t\t\t\t<text class=\"halohtmlicon icon-heading\" @click=\"fnOnInsertHead\"></text>\n\t\t\t\t<text\n\t\t\t\t\tclass=\"halohtmlicon icon-quote\"\n\t\t\t\t\tdata-method=\"insertHtml\"\n\t\t\t\t\tdata-param=\"<blockquote style='padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5'>引用</blockquote>\"\n\t\t\t\t\t@click=\"fnOnToolBarEdit\"\n\t\t\t\t></text>\n\t\t\t\t<text class=\"halohtmlicon icon-table\" @click=\"fnOnInsertTable\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-code\" @click=\"fnOnInsertCode\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-emoji\" data-type=\"emoji\" data-title=\"插入表情\" @click=\"fnOnOpenDialog\"></text>\n\t\t\t\t<text class=\"halohtmlicon icon-template\" data-type=\"template\" data-title=\"插入模板\" @click=\"fnOnOpenDialog\"></text>\n\t\t\t\t<text v-if=\"editable\" class=\"flex-1 text-align-center iconfont icon-eye\" style=\"font-size: 44rpx;\" @click=\"fnOnPreview()\"></text>\n\t\t\t\t<text v-else class=\"halohtmlicon icon-edit\" @click=\"fnOnPreview()\"></text>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 编辑区域 -->\n\t\t<view class=\"edit-wrap bg-white round-3\">\n\t\t\t<mp-html\n\t\t\t\tclass=\"evan-markdown\"\n\t\t\t\tlazy-load\n\t\t\t\tref=\"markdown\"\n\t\t\t\t:editable=\"editable\"\n\t\t\t\t:domain=\"markdownConfig.domain\"\n\t\t\t\t:loading-img=\"markdownConfig.loadingGif\"\n\t\t\t\t:scroll-table=\"true\"\n\t\t\t\tselectable=\"force\"\n\t\t\t\t:tag-style=\"markdownConfig.tagStyle\"\n\t\t\t\t:container-style=\"markdownConfig.containStyle\"\n\t\t\t\t:content=\"form.content\"\n\t\t\t\t:markdown=\"true\"\n\t\t\t\t:showLineNumber=\"true\"\n\t\t\t\t:showLanguageName=\"true\"\n\t\t\t\t:copyByLongPress=\"true\"\n\t\t\t/>\n\t\t</view>\n\t\t<view class=\"fixed-bottom bg-white pa-24 \">\n\t\t\t<view class=\"btn-wrap flex flex-center\">\n\t\t\t\t<block v-if=\"queryParams.postsId\">\n\t\t\t\t\t<tm-button :width=\"200\" :height=\"75\" block theme=\"light-blue\" @click=\"fnSaveAtPublish()\">我要发布</tm-button>\n\t\t\t\t\t<tm-button class=\"ml-24\" :width=\"200\" :height=\"75\" block theme=\"blue-grey\" @click=\"fnRefreshData()\">重新加载</tm-button>\n\t\t\t\t\t<tm-button class=\"ml-24\" :width=\"200\" :height=\"75\" block theme=\"red\" @click=\"fnClear()\">清空内容</tm-button>\n\t\t\t\t</block>\n\t\t\t\t<block v-else>\n\t\t\t\t\t<tm-button :width=\"300\" :height=\"75\" block theme=\"light-blue\" @click=\"fnSaveAtPublish()\">我要发布</tm-button>\n\t\t\t\t\t<tm-button class=\"ml-24\" theme=\"red\" :width=\"300\" :height=\"75\" block @click=\"fnClear()\">清空内容</tm-button>\n\t\t\t\t</block>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 附件选择文件 -->\n\t\t<attachment-select\n\t\t\tv-if=\"attachmentsSelect.show\"\n\t\t\t:title=\"attachmentsSelect.title\"\n\t\t\t@on-select=\"fnOnAttachmentsSelect\"\n\t\t\t@on-close=\"attachmentsSelect.show = false\"\n\t\t></attachment-select>\n\n\t\t<!--  弹窗 -->\n\t\t<block v-if=\"modal\">\n\t\t\t<view class=\"mask\" />\n\t\t\t<view class=\"modal\">\n\t\t\t\t<view class=\"modal_title\">{{ modal.title }}</view>\n\t\t\t\t<view class=\"flex flex-col flex-center\" v-if=\"modal.type == 'table'\">\n\t\t\t\t\t<tm-input required title=\"输入行数\" input-type=\"number\" v-model=\"modal.rows\"></tm-input>\n\t\t\t\t\t<tm-input required title=\"输入列数\" input-type=\"number\" v-model=\"modal.cols\"></tm-input>\n\t\t\t\t</view>\n\t\t\t\t<block v-else><input class=\"modal_input\" :value=\"modal.value\" maxlength=\"-1\" auto-focus @input=\"modalInput\" /></block>\n\n\t\t\t\t<view class=\"modal_foot\">\n\t\t\t\t\t<view class=\"modal_button\" @tap=\"modalCancel\">取消</view>\n\t\t\t\t\t<view class=\"modal_button\" style=\"color:#576b95;border-left:1px solid rgba(0,0,0,.1)\" @tap=\"modalConfirm\">确定</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</block>\n\n\t\t<!-- 底部弹窗 -->\n\t\t<tm-poup v-model=\"dialog.show\" position=\"bottom\" height=\"auto\" @change=\"fnOnCloseDialog()\">\n\t\t\t<text class=\"poup-close\" @click=\"fnOnCloseDialog(false)\">×</text>\n\t\t\t<view class=\"poup-head pa-24 pb-0 text-align-center text-weight-b \">{{ dialog.title }}</view>\n\t\t\t<view class=\"poup-body pa-36\">\n\t\t\t\t<!-- 表情区域 -->\n\t\t\t\t<block v-if=\"dialog.type == 'emoji'\">\n\t\t\t\t\t<view class=\"flex\" v-for=\"(item, index) in emojis\" :key=\"index\">\n\t\t\t\t\t\t<view class=\"flex-1 mt-6 mb-6 text-size-xl\" v-for=\"(emoji, index) in item\" :key=\"emoji\" :data-emoji=\"emoji\" @click=\"fnOnInsertEmoji\">{{ emoji }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t\t<!-- 模板区域 -->\n\t\t\t\t<block v-else-if=\"dialog.type == 'template'\">\n\t\t\t\t\t<block v-for=\"(template, index) in templates\" :key=\"index\">\n\t\t\t\t\t\t<rich-text :nodes=\"template\" data-method=\"insertHtml\" :data-param=\"template\" @click=\"fnOnToolBarEdit\"></rich-text>\n\t\t\t\t\t</block>\n\t\t\t\t</block>\n\t\t\t</view>\n\t\t</tm-poup>\n\n\t\t<!-- 发布设置弹窗 -->\n\t</view>\n</template>\n\n<script>\nimport { getAdminAccessToken } from '@/utils/auth.js';\n\nimport MarkdownConfig from '@/common/markdown/markdown.config.js';\nimport mpHtml from '@/components/mp-html/components/mp-html/mp-html.vue';\n\nimport tmSkeleton from '@/tm-vuetify/components/tm-skeleton/tm-skeleton.vue';\nimport tmButton from '@/tm-vuetify/components/tm-button/tm-button.vue';\nimport tmEmpty from '@/tm-vuetify/components/tm-empty/tm-empty.vue';\nimport tmTranslate from '@/tm-vuetify/components/tm-translate/tm-translate.vue';\nimport tmFlotbutton from '@/tm-vuetify/components/tm-flotbutton/tm-flotbutton.vue';\nimport tmSwitch from '@/tm-vuetify/components/tm-switch/tm-switch.vue';\nimport tmPoup from '@/tm-vuetify/components/tm-poup/tm-poup.vue';\nimport tmInput from '@/tm-vuetify/components/tm-input/tm-input.vue';\nimport attachmentSelect from '@/components/attachment-select/attachment-select.vue';\n\nexport default {\n\tcomponents: {\n\t\tmpHtml,\n\t\ttmSkeleton,\n\t\ttmButton,\n\t\ttmEmpty,\n\t\ttmTranslate,\n\t\ttmFlotbutton,\n\t\ttmSwitch,\n\t\ttmPoup,\n\t\ttmInput,\n\t\tattachmentSelect\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: 'loading',\n\t\t\tmarkdownConfig: MarkdownConfig,\n\t\t\tqueryParams: {\n\t\t\t\tpostsId: undefined\n\t\t\t},\n\t\t\tstatus: true,\n\t\t\tform: {\n\t\t\t\tcontent: '',\n\t\t\t\tkeepRaw: true,\n\t\t\t\toriginalContent: '',\n\t\t\t\tformatContent: '',\n\t\t\t\ttype: 'PUBLIC'\n\t\t\t},\n\t\t\tmodal: null,\n\t\t\teditable: true,\n\t\t\tattachmentsSelect: {\n\t\t\t\ttitle: '选择附件',\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tdialog: {\n\t\t\t\tshow: false,\n\t\t\t\ttype: ''\n\t\t\t},\n\n\t\t\t// 用于插入的 emoji 表情\n\t\t\temojis: [\n\t\t\t\t['😄', '😷', '😂', '😝', '😳', '😱', '😔', '😒', '😉'],\n\t\t\t\t['😎', '😭', '😍', '😘', '🤔', '😕', '🙃', '🤑', '😲'],\n\t\t\t\t['🙄', '😤', '😴', '🤓', '😡', '😑', '😮', '🤒', '🤮']\n\t\t\t],\n\t\t\t// 用于插入的 html 模板\n\t\t\ttemplates: [\n\t\t\t\t'<section style=\"text-align: center; margin: 0px auto;\"><section style=\"border-radius: 4px; border: 1px solid #757576; display: inline-block; padding: 5px 20px;\"><span style=\"font-size: 18px; color: #595959;\">标题</span></section></section>',\n\t\t\t\t'<div style=\"width: 100%; box-sizing: border-box; border-radius: 5px; background-color: #f6f6f6; padding: 10px; margin: 10px 0\"><div>卡片</div><div style=\"font-size: 12px; color: gray\">正文</div></div>',\n\t\t\t\t'<div style=\"border: 1px solid gray; box-shadow: 3px 3px 0px #cfcfce; padding: 10px; margin: 10px 0\">段落</div>'\n\t\t\t]\n\t\t};\n\t},\n\tonLoad() {\n\t\tconst postsId = this.$Route.query.postsId;\n\t\tif (postsId == undefined) {\n\t\t\tthis.fnSetPageTitle('新增文章');\n\t\t\tthis.form.content = uni.getStorageSync('posts-content');\n\t\t} else {\n\t\t\tthis.fnSetPageTitle('编辑文章');\n\t\t\tthis.queryParams.postsId = postsId;\n\t\t\tthis.fnGetData();\n\t\t}\n\t},\n\tonReady() {\n\t\t/**\n\t\t * @description 设置获取链接的方法\n\t\t * @param {String} type 链接的类型（img/video/audio/link）\n\t\t * @param {String} value 修改链接时，这里会传入旧值\n\t\t * @returns {Promise} 返回线上地址\n\t\t *   type 为音视频时可以返回一个数组作为源地址\n\t\t *   type 为 audio 时，可以返回一个 object，包含 src、name、author、poster 等字段\n\t\t */\n\t\tthis.$refs.markdown.getSrc = (type, value) => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.checkEditable()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (type === 'img' || type === 'video') {\n\t\t\t\t\t\t\tuni.showActionSheet({\n\t\t\t\t\t\t\t\titemList: ['本地选取', '附件选取'],\n\t\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\t\tif (res.tapIndex === 0) {\n\t\t\t\t\t\t\t\t\t\t// 本地选取\n\t\t\t\t\t\t\t\t\t\tif (type === 'img') {\n\t\t\t\t\t\t\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\t\t\t\t\t\t\tcount: value === undefined ? 9 : 1,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.tempFilePaths.length == 1 && wx.editImage) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// 单张图片时进行编辑\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twx.editImage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc: res.tempFilePaths[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomplete: res2 => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '上传中'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fnFileUpload(res2.tempFilePath || res.tempFilePaths[0], type).then(res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '上传中'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst arr = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let item of res.tempFilePaths) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// 依次上传\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst src = await this.fnFileUpload(item, type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tarr.push(src);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn arr;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})().then(res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tfail: reject\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tuni.chooseVideo({\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '上传中'\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fnFileUpload(res.tempFilePath, type).then(res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tfail: reject\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// 远程链接\n\t\t\t\t\t\t\t\t\t\tthis.callback = {\n\t\t\t\t\t\t\t\t\t\t\tresolve,\n\t\t\t\t\t\t\t\t\t\t\treject\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\tthis.attachmentsSelect.title = type === 'img' ? '选取图片' : '选取视频';\n\t\t\t\t\t\t\t\t\t\tthis.attachmentsSelect.show = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.callback = {\n\t\t\t\t\t\t\t\tresolve,\n\t\t\t\t\t\t\t\treject\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tlet title;\n\t\t\t\t\t\t\tif (type === 'audio') {\n\t\t\t\t\t\t\t\ttitle = '音频链接';\n\t\t\t\t\t\t\t} else if (type === 'link') {\n\t\t\t\t\t\t\t\ttitle = '链接地址';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.$set(this, 'modal', {\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {});\n\t\t\t});\n\t\t};\n\t},\n\n\tmethods: {\n\t\t// 加载文章数据\n\t\tfnGetData(refresh = false) {\n\t\t\tthis.loading = 'loading';\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true,\n\t\t\t\ttitle: '加载中...'\n\t\t\t});\n\t\t\tthis.$httpApi.admin\n\t\t\t\t.getPostsById(this.queryParams.postsId)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\tthis.fnSetPageTitle(`正在编辑 ${res.data.title}`);\n\t\t\t\t\t\tthis.$set(this, 'form', res.data);\n\t\t\t\t\t\tif (refresh) {\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tthis.$refs.markdown.setContent(res.data.content);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.loading = 'success';\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loading = 'error';\n\t\t\t\t\t\tthis.fnSetPageTitle(`文章加载失败`);\n\t\t\t\t\t\tuni.$tm.toast('文章加载失败，请点击下方重新加载!');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthis.loading = 'error';\n\t\t\t\t\tthis.fnSetPageTitle(`文章加载失败`);\n\t\t\t\t\tuni.$tm.toast('文章加载失败，请点击下方重新加载!');\n\t\t\t\t});\n\t\t},\n\t\tfnRefreshData(showConfirm = true) {\n\t\t\tif (showConfirm) {\n\t\t\t\tuni.$eShowModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '您当前的编辑可能未保存，确定要重新加载吗？',\n\t\t\t\t\tshowCancel: true,\n\t\t\t\t\tcancelText: '否',\n\t\t\t\t\tcancelColor: '#999999',\n\t\t\t\t\tconfirmText: '是',\n\t\t\t\t\tconfirmColor: '#03a9f4'\n\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.fnGetData(true);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {});\n\t\t\t} else {\n\t\t\t\tthis.fnGetData(true);\n\t\t\t}\n\t\t},\n\t\t// 检查是否可编辑\n\t\tcheckEditable() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (this.editable) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '需要继续编辑吗？',\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tthis.editable = true;\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 调用编辑操作\n\t\tfnOnToolBarEdit(e) {\n\t\t\tthis.$refs.markdown[e.currentTarget.dataset.method](e.currentTarget.dataset.param);\n\t\t},\n\t\t// 监听附件选择\n\t\tfnOnAttachmentsSelect(file) {\n\t\t\tthis.attachmentsSelect.show = false;\n\t\t\tthis.callback.resolve(file.path);\n\t\t},\n\t\t// 处理模态框\n\t\tmodalInput(e) {\n\t\t\tthis.value = e.detail.value;\n\t\t},\n\t\tmodalConfirm() {\n\t\t\tif (this.modal.type == 'table') {\n\t\t\t\tif (this.modal.rows <= 0) {\n\t\t\t\t\treturn uni.$tm.toast('行数必须大于0');\n\t\t\t\t}\n\t\t\t\tif (this.modal.cols <= 0) {\n\t\t\t\t\treturn uni.$tm.toast('列数必须大于0');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.callback.resolve(this.value || this.modal.value || '');\n\t\t\tthis.$set(this, 'modal', null);\n\t\t},\n\t\tmodalCancel() {\n\t\t\tthis.callback.reject();\n\t\t\tthis.$set(this, 'modal', null);\n\t\t},\n\t\t// 上传图片方法\n\t\tfnFileUpload(src, type) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\tfilePath: src,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'admin-authorization': getAdminAccessToken()\n\t\t\t\t\t},\n\t\t\t\t\turl: this.$baseApiUrl + '/api/admin/attachments/upload',\n\t\t\t\t\tname: 'file',\n\t\t\t\t\tsuccess: upladRes => {\n\t\t\t\t\t\tconst _uploadRes = JSON.parse(upladRes.data);\n\t\t\t\t\t\tif (_uploadRes.status == 200) {\n\t\t\t\t\t\t\tresolve(_uploadRes.data.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.$tm.toast(_uploadRes.message);\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tuni.$tm.toast(err.message);\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t// 插入 head 系列标签\n\t\tfnOnInsertHead() {\n\t\t\tthis.checkEditable()\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst _hList = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\t\t\t\t\twx.showActionSheet({\n\t\t\t\t\t\titemList: _hList,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tlet tagName = _hList[res.tapIndex];\n\t\t\t\t\t\t\tthis.$refs.markdown.insertHtml(`<${tagName}>标题</${tagName}>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\t\t// 插入表格\n\t\tfnOnInsertTable() {\n\t\t\tthis.checkEditable()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.$set(this, 'modal', {\n\t\t\t\t\t\ttitle: '插入表格',\n\t\t\t\t\t\ttype: 'table',\n\t\t\t\t\t\trows: 1,\n\t\t\t\t\t\tcols: 1,\n\t\t\t\t\t\tvalue: this.value\n\t\t\t\t\t});\n\t\t\t\t\tthis.callback = {\n\t\t\t\t\t\tresolve: () => {\n\t\t\t\t\t\t\tthis.$refs.markdown.insertTable(this.modal.rows, this.modal.cols);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject: () => {}\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\n\t\t// 保存插入表格\n\t\tfnOnSaveInsertTable() {\n\t\t\tthis.callback.resolve(this.value || this.modal.value || '');\n\t\t},\n\t\t// 插入代码\n\t\tfnOnInsertCode() {\n\t\t\tthis.checkEditable()\n\t\t\t\t.then(() => {\n\t\t\t\t\tuni.showActionSheet({\n\t\t\t\t\t\titemList: ['html', 'css', 'javascript', 'json'],\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconst lan = ['html', 'css', 'javascript', 'json'][res.tapIndex];\n\t\t\t\t\t\t\tthis.$refs.markdown.insertHtml(`<pre><code class=\"language-${lan}\">${lan} code</code></pre>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\t\t// 插入 emoji\n\t\tfnOnInsertEmoji(e) {\n\t\t\tthis.$refs.markdown.insertHtml(e.currentTarget.dataset.emoji);\n\t\t\tthis.fnOnCloseDialog();\n\t\t},\n\n\t\t// 处理底部弹窗\n\t\tfnOnOpenDialog(e) {\n\t\t\tthis.checkEditable()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.dialog.type = e.currentTarget.dataset.type;\n\t\t\t\t\tthis.dialog.title = e.currentTarget.dataset.title;\n\t\t\t\t\tthis.dialog.show = true;\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\t\tfnOnCloseDialog(e) {\n\t\t\tif (e == false) {\n\t\t\t\tthis.dialog.show = false;\n\t\t\t\tthis.dialog.type = '';\n\t\t\t}\n\t\t},\n\t\tfnOnPreview() {\n\t\t\tthis.editable = !this.editable;\n\t\t\tif (this.editable) {\n\t\t\t\tuni.$tm.toast('您已进入编辑模式！');\n\t\t\t} else {\n\t\t\t\tuni.$tm.toast('您已进入预览模式！');\n\t\t\t\tlet _content = this.$refs.markdown.getContent();\n\t\t\t\tif (_content === '<p></p>') {\n\t\t\t\t\t_content = '';\n\t\t\t\t}\n\t\t\t\tthis.form.content = _content;\n\t\t\t\tuni.setStorageSync('posts-content', _content);\n\t\t\t}\n\t\t},\n\n\t\t// 发布\n\t\tfnSaveAtPublish() {\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true,\n\t\t\t\ttitle: '保存中...'\n\t\t\t});\n\t\t\tconst _content = this.$refs.markdown.getContent();\n\t\t\tif (!_content.trim()) {\n\t\t\t\treturn uni.$tm.toast('请输入内容!');\n\t\t\t}\n\t\t\tthis.form.content = _content;\n\t\t\tthis.form.formatContent = _content;\n\t\t\tthis.form.originalContent = this.$refs.markdown.getText();\n\t\t\tuni.setStorageSync('posts-content', _content);\n\t\t\tuni.setStorageSync('posts-content-source', this.form.originalContent);\n\t\t\tif (this.form.id) {\n\t\t\t\tthis.$Router.push({\n\t\t\t\t\tpath: '/pagesB/articles/article-setting',\n\t\t\t\t\tquery: { postsId: this.form.id, postTitle: this.form.title, isEdit: 1, from: 'edit' }\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$Router.push({ path: '/pagesB/articles/article-setting', query: { postsId: '', postTitle: '', isEdit: 0, from: 'edit' } });\n\t\t\t}\n\n\t\t\treturn;\n\t\t\tif (this.form) {\n\t\t\t\tthis.$httpApi.admin\n\t\t\t\t\t.updatePostsById(this.form.id, this.form)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\t\tuni.$tm.toast('保存成功!');\n\t\t\t\t\t\t\tuni.setStorageSync('posts-content', '');\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.$emit('refresh-article-list');\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.$tm.toast('保存失败，请重试!');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tuni.$tm.toast('保存失败，请重试!');\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$httpApi.admin\n\t\t\t\t\t.createPosts(this.form)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\t\tuni.$tm.toast('保存成功!');\n\t\t\t\t\t\t\tuni.setStorageSync('posts-content', '');\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.$emit('refresh-article-list');\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.$tm.toast('保存失败，请重试!');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tuni.$tm.toast('保存失败，请重试!');\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tfnClear() {\n\t\t\tuni.$eShowModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定清空当前内容吗？',\n\t\t\t\tshowCancel: true,\n\t\t\t\tcancelText: '否',\n\t\t\t\tcancelColor: '#999999',\n\t\t\t\tconfirmText: '是',\n\t\t\t\tconfirmColor: '#03a9f4'\n\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.$refs.markdown.clear();\n\t\t\t\t\tuni.setStorageSync('posts-content', '');\n\t\t\t\t\tuni.setStorageSync('posts-content-source', '');\n\t\t\t\t\tthis.fnToTopPage();\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.app-page {\n\twidth: 100vw;\n\tmin-height: 100vh;\n\tbox-sizing: border-box;\n\tpadding-bottom: 236rpx;\n}\n\n.fixed-bottom {\n\tposition: fixed;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n\tbox-sizing: border-box;\n\tbox-shadow: 0rpx -4rpx 24rpx rgba(0, 0, 0, 0.05);\n\tborder-radius: 24rpx 24rpx 0 0;\n}\n\n.edit-wrap {\n\tbox-sizing: border-box;\n\tpadding-top: 150rpx;\n}\n\n.modal {\n\twidth: 80vw;\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: #fff;\n\tborder-radius: 24rpx;\n}\n\n.modal_title {\n\tpadding-top: 42rpx;\n\tpadding-bottom: 32rpx;\n\tfont-size: 34rpx;\n\tfont-weight: 700;\n\ttext-align: center;\n}\n\n.modal_input {\n\tdisplay: block;\n\tpadding: 12rpx 12rpx;\n\tmargin: 24rpx;\n\tmargin-top: 0;\n\tfont-size: 30rpx;\n\tborder: 2rpx solid #dfe2e5;\n\tborder-radius: 6rpx;\n}\n\n.modal_foot {\n\tdisplay: flex;\n\tline-height: 100rpx;\n\tfont-weight: bold;\n\tborder-top: 2rpx solid rgba(0, 0, 0, 0.1);\n}\n\n.modal_button {\n\tflex: 1;\n\ttext-align: center;\n}\n\n/* 蒙版 */\n.mask {\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\tbackground-color: black;\n\topacity: 0.5;\n}\n.poup-close {\n\tposition: absolute;\n\tright: 30rpx;\n\ttop: 8rpx;\n\tfont-size: 50rpx;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./article-edit.vue?vue&type=style&index=0&id=488d2650&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./article-edit.vue?vue&type=style&index=0&id=488d2650&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675514569107\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}