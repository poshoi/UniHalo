{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?af6a","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?5bbf","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?9ecd","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?4bff","uni-app:///pagesB/attachment/attachment.vue","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?d5da","webpack:////Users/zgj/project/uni-halo-master/pagesB/attachment/attachment.vue?68ed"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","tmSkeleton","tmSearch","tmDropDownMenu","tmEmpty","tmButton","tmCheckbox","tmPoup","tmForm","tmUpload","tmInput","tmImages","tmFlotbutton","tmTranslate","tmActionSheetMenu","data","loading","filterLoading","btnOption","actions","icon","color","filterList","title","children","name","model","queryParams","size","page","attachmentType","keyword","mediaType","sort","result","dataList","total","detail","params","form","show","isLoadMore","loadMoreText","fileSelectAction","list","onLoad","created","onPullDownRefresh","onReachBottom","uni","methods","fnTransFileSize","fnPow1024","fnGetIconClass","_class","fnCheckIsFileType","fnGetFilters","Promise","then","id","catch","fnOnConfirm","fnOnSearch","fnGetData","mask","getAttachmentsByPage","item","thi","console","finally","setTimeout","fnShowDetail","fnOnDelete","content","showCancel","cancelText","cancelColor","confirmText","confirmColor","deleteAttachmentById","fnOnUpdate","updateAttachmentById","fnOnFlotButton","fnOnFileSelectActionChange","count","success","fnOnUploadFileByPath","filePath","header","url","fail","fnOnUploadFileByFile","files"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7DA;AAAA;AAAA;AAAA;AAAyzB,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACoH70B;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAiBA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC,UACA;UACAC;UACAC;QACA,GACA;UACAD;UACAC;QACA,GACA;UACAD;UACAC;QACA;MAEA;MACAC,aACA;QACAC;QACAC,WACA;UACAD;UACAE;UACAC;UACAF;QACA;MAEA,GACA;QACAD;QACAC,WACA;UACAD;UACAE;UACAC;UACAF;QACA;MAEA,EACA;MACAG;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MAEAC;QACAH;QACAI;MACA;IACA;EACA;EAEAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;MACA;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;IACA;MACAC;QACA7B;QACAG;MACA;IACA;EACA;EACA2B;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEAC;MACA;MACA;QACAC;MACA;QACAA;MACA;MACA;IACA;IACAC;MACA,8EACA,8EACA;IACA;IACAC;MAAA;MACA;MACAC,yGACAC;QACA;QACA;UACA;YACAnC;YACAoC;UACA;QACA;QACA;QACA;UACA;YACApC;YACAoC;UACA;QACA;QACA;MACA,GACAC;QACA;QACAX;MACA;IACA;IAEA;IACAY;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MAAA;MACAd;QACAe;QACAzC;MACA;MACA;MACA;QACA;MACA;MACA;MACA,oBACA0C,uCACAP;QACA;UACA;UACA;UACA;UACA;YACA;YACA;cACAQ;cACA;YACA;UACA;YACA;cACAA;cACA;YACA;UACA;UACA;QACA;UACAjB;UACAkB;QACA;MACA,GACAP;QACAQ;QACAnB;QACA;QACA;MACA,GACAoB;QACAC;UACArB;UACAA;QACA;MACA;IACA;IAEA;IACAsB;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAvB;QACA1B;QACAkD;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACApB;QACAT;UACAe;UACAzC;QACA;QACA,sBACAwD,8CACArB;UACA;YACAT;YACAqB;cACA;cACA;cACA;cACA;YACA;UACA;YACArB;UACA;QACA,GACAW;UACAQ;UACAnB;QACA;MACA,GACAW;IACA;IACAoB;MACA;QACA;MACA;MACA/B;QACAe;QACAzC;MACA;MACA,oBACA0D,mEACAvB;QACA;UACAT;;UAEA;UACA;UACA;UACA;UACA;UACA;QACA;UACAA;QACA;MACA,GACAW;QACAX;MACA;IACA;IACA;IACAiC;MACA;;MAEA;;MAGA;;MAKA;;MASA;IACA;IACAC;MAAA;MACA;;MAEA;QACA;UACA;UACAlC;YACAmC;YACAC;cACAjB;cACA;YACA;UACA;UACA;QACA;UACA;UACAnB;YACAmC;YACAC;cACAjB;cACA;YACA;UACA;UACA;QACA;UACA;UACAnB;YACAmC;YACAC;cACA;YACA;UACA;UACA;MAAA;;MAKA;;MA0DA;IA0DA;IAEA;IACAC;MAAA;MACArC;QACA1B;QACAyC;MACA;MACAf;QACAsC;QACAC;UACA;QACA;QACAC;QACAhE;QACA4D;UACA;UACA;YACApC;YACAqB;cACA;YACA;UACA;YACArB;UACA;QACA;QACAyC;UACAzC;QACA;MACA;IACA;IACA;IACA0C;MAAA;MACA1C;QACA1B;QACAyC;MACA;MAEAf;QAKA2C;QAEAJ;UACA;QACA;QACAC;QACAhE;QACA4D;UACA;UACA;YACApC;YACAqB;cACA;YACA;UACA;YACArB;UACA;QACA;QACAyC;UACAzC;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3qBA;AAAA;AAAA;AAAA;AAAoiD,CAAgB,+7CAAG,EAAC,C;;;;;;;;;;;ACAxjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesB/attachment/attachment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pagesB/attachment/attachment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./attachment.vue?vue&type=template&id=f1938268&scoped=true&\"\nvar renderjs\nimport script from \"./attachment.vue?vue&type=script&lang=js&\"\nexport * from \"./attachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./attachment.vue?vue&type=style&index=0&id=f1938268&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1938268\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesB/attachment/attachment.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./attachment.vue?vue&type=template&id=f1938268&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !(_vm.loading != \"success\") ? _vm.dataList.length : null\n  var l0 =\n    !(_vm.loading != \"success\") && !(g0 == 0)\n      ? _vm.__map(_vm.dataList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var m0 = _vm.fnGetIconClass(item.mediaType)\n          var f0 = _vm._f(\"formatTime\")({\n            d: item.createTime,\n            f: \"yyyy年MM月dd日 星期w\",\n          })\n          return {\n            $orig: $orig,\n            m0: m0,\n            f0: f0,\n          }\n        })\n      : null\n  var g1 = !(_vm.loading != \"success\")\n    ? _vm.$utils.fnCheckIsFileType(\"image\", _vm.detail.form)\n    : null\n  var g2 =\n    !(_vm.loading != \"success\") && g1\n      ? _vm.$utils.checkThumbnailUrl(_vm.detail.form.path)\n      : null\n  var g3 =\n    !(_vm.loading != \"success\") && !g1\n      ? _vm.$utils.fnCheckIsFileType(\"video\", _vm.detail.form)\n      : null\n  var g4 =\n    !(_vm.loading != \"success\") && !g1 && g3\n      ? _vm.$utils.checkUrl(_vm.detail.form.path)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      return _vm.$utils.copyText(_vm.detail.form.path, \"复制成功！\")\n    }\n    _vm.e1 = function ($event) {\n      _vm.detail.show = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./attachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./attachment.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"app-page flex flex-col\">\n\t\t<!-- 搜索区域 -->\n\t\t<view class=\"filter-wrap bg-white shadow-3\">\n\t\t\t<tm-search v-model=\"queryParams.keyword\" :round=\"24\" :shadow=\"0\" color=\"light-blue\" insert-color=\"light-blue\" :clear=\"true\" @confirm=\"fnOnSearch\"></tm-search>\n\t\t\t<tm-dropDownMenu :shadow=\"0\" color=\"light-blue\" @confirm=\"fnOnConfirm\" :list=\"filterList\"></tm-dropDownMenu>\n\t\t</view>\n\n\t\t<!-- 占位区域 -->\n\t\t<view style=\"width: 100vw;height: 184rpx;\"></view>\n\n\t\t<view v-if=\"loading != 'success'\" class=\"loading-wrap\">\n\t\t\t<tm-skeleton model=\"listAvatr\"></tm-skeleton>\n\t\t\t<tm-skeleton model=\"listAvatr\"></tm-skeleton>\n\t\t\t<tm-skeleton model=\"listAvatr\"></tm-skeleton>\n\t\t\t<tm-skeleton model=\"listAvatr\"></tm-skeleton>\n\t\t</view>\n\n\t\t<view class=\"page-content pa-24 flex flex-col\" v-else>\n\t\t\t<view v-if=\"dataList.length == 0\" class=\"content-empty flex flex-center\">\n\t\t\t\t<!-- 空布局 -->\n\t\t\t\t<tm-empty icon=\"icon-shiliangzhinengduixiang-\" label=\"暂无任何附件\"></tm-empty>\n\t\t\t</view>\n\n\t\t\t<block v-else>\n\t\t\t\t<!-- 内容区域 -->\n\t\t\t\t<block v-for=\"(item, index) in dataList\" :key=\"index\">\n\t\t\t\t\t<tm-translate animation-name=\"fadeUp\" :wait=\"(index + 1) * 50\">\n\t\t\t\t\t\t<view class=\"attachment-card mb-24 flex bg-white pa-24 round-3\" @click=\"fnShowDetail(item)\">\n\t\t\t\t\t\t\t<view class=\"cover round-3 flex flex-center\" :class=\"[fnGetIconClass(item.mediaType)]\">\n\t\t\t\t\t\t\t\t<text class=\"icon iconfont\">{{ item.suffix }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<!-- 内容区域 -->\n\t\t\t\t\t\t\t<view class=\"info pl-36\">\n\t\t\t\t\t\t\t\t<view class=\"file-name text-size-m text-weight-b\">{{ item.name }}</view>\n\t\t\t\t\t\t\t\t<view class=\"file-media mt-12 text-size-s text-grey-darken-1\">附件类型：{{ item.mediaType }}</view>\n\t\t\t\t\t\t\t\t<view class=\"file-media mt-8 text-size-s text-grey-darken-1\">附件大小：{{ item.sizeText }}</view>\n\t\t\t\t\t\t\t\t<view class=\"file-path mt-8 text-size-s text-grey-darken-1\">上传日期：{{ { d: item.createTime, f: 'yyyy年MM月dd日 星期w' } | formatTime }}</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</tm-translate>\n\t\t\t\t</block>\n\n\t\t\t\t<tm-flotbutton @click=\"fnToTopPage\" :offset=\"[16, 80]\" color=\"bg-gradient-light-blue-accent\" size=\"m\" icon=\"icon-angle-up\"></tm-flotbutton>\n\t\t\t\t<view class=\"load-text \">{{ loadMoreText }}</view>\n\t\t\t</block>\n\n\t\t\t<!-- 弹窗详情 -->\n\t\t\t<tm-poup v-model=\"detail.show\" position=\"bottom\" height=\"80vh\">\n\t\t\t\t<view class=\"poup-content\">\n\t\t\t\t\t<view class=\"poup-head text-align-center text-weight-b text-size-g ma-24 \">附件详情</view>\n\t\t\t\t\t<scroll-view class=\"poup-body pa-24 pt-0\" :scroll-y=\"true\" @touchmove.stop>\n\t\t\t\t\t\t<view class=\"preview-file pl-24 pr-24\">\n\t\t\t\t\t\t\t<!-- 图片预览 -->\n\t\t\t\t\t\t\t<tm-images\n\t\t\t\t\t\t\t\tv-if=\"$utils.fnCheckIsFileType('image', detail.form)\"\n\t\t\t\t\t\t\t\t:width=\"700\"\n\t\t\t\t\t\t\t\t:height=\"350\"\n\t\t\t\t\t\t\t\t:round=\"3\"\n\t\t\t\t\t\t\t\t:src=\"$utils.checkThumbnailUrl(detail.form.path)\"\n\t\t\t\t\t\t\t\tmodel=\"aspectFill\"\n\t\t\t\t\t\t\t></tm-images>\n\t\t\t\t\t\t\t<!-- 视频 -->\n\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\tv-else-if=\"$utils.fnCheckIsFileType('video', detail.form)\"\n\t\t\t\t\t\t\t\tclass=\"round-3\"\n\t\t\t\t\t\t\t\tstyle=\"width: 100%;height: 350rpx;\"\n\t\t\t\t\t\t\t\t:src=\"$utils.checkUrl(detail.form.path)\"\n\t\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\t></video>\n\t\t\t\t\t\t\t<view v-else class=\"flex flex-center border-a-1 round-3 text-align-center text-grey-darken-1\" style=\"height: 280rpx;background-color: #f2f2f2;\">\n\t\t\t\t\t\t\t\t该文件暂不支持预览\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<tm-input title=\"附件名称\" v-model=\"detail.form.name\" :clear=\"true\" placeholder=\"请输入附件名称...\"></tm-input>\n\t\t\t\t\t\t<tm-input :disabled=\"true\" color=\"grey\" title=\"附件类型\" v-model=\"detail.form.mediaType\"></tm-input>\n\t\t\t\t\t\t<tm-input :disabled=\"true\" color=\"grey\" title=\"附件位置\" v-model=\"detail.form.type\"></tm-input>\n\t\t\t\t\t\t<tm-input :disabled=\"true\" color=\"grey\" title=\"附件大小\" v-model=\"detail.form.sizeText\"></tm-input>\n\t\t\t\t\t\t<tm-input :disabled=\"true\" color=\"grey\" title=\"上传日期\" v-model=\"detail.form.createTime\"></tm-input>\n\t\t\t\t\t\t<tm-input\n\t\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t\t\t:vertical=\"true\"\n\t\t\t\t\t\t\t:borderBottom=\"false\"\n\t\t\t\t\t\t\tinput-type=\"textarea\"\n\t\t\t\t\t\t\ttitle=\"文件地址\"\n\t\t\t\t\t\t\tcolor=\"grey\"\n\t\t\t\t\t\t\tbg-color=\"grey-lighten-5\"\n\t\t\t\t\t\t\t:height=\"120\"\n\t\t\t\t\t\t\tv-model=\"detail.form.path\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:default=\"{ title }\">\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t<tm-button text theme=\"light-blue\" size=\"xs\" @click=\"$utils.copyText(detail.form.path, '复制成功！')\">复制</tm-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</tm-input>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t\t<view class=\"btn-wrap flex flex-center\">\n\t\t\t\t\t\t<tm-button size=\"m\" navtie-type=\"form\" theme=\"bg-gradient-blue-accent\" @click=\"fnOnUpdate()\">保存</tm-button>\n\t\t\t\t\t\t<tm-button size=\"m\" theme=\"bg-gradient-red-accent\" @click=\"fnOnDelete()\">删除</tm-button>\n\t\t\t\t\t\t<tm-button size=\"m\" theme=\"bg-gradient-blue-grey-accent\" @click=\"detail.show = false\">关闭</tm-button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</tm-poup>\n\t\t</view>\n\n\t\t<tm-flotbutton :show-text=\"true\" color=\"bg-gradient-orange-accent\" @click=\"fnOnFlotButton\"></tm-flotbutton>\n\n\t\t<tm-actionSheetMenu title=\"文件上传操作\" @change=\"fnOnFileSelectActionChange\" v-model=\"fileSelectAction.show\" :actions=\"fileSelectAction.list\"></tm-actionSheetMenu>\n\t</view>\n</template>\n\n<script>\n// #ifdef APP-PLUS\nconst AfDocument = uni.requireNativePlugin('Aq-ChooseFile'); // 临时替代\n// #endif\nimport { getAdminAccessToken } from '@/utils/auth.js';\n\nimport tmSkeleton from '@/tm-vuetify/components/tm-skeleton/tm-skeleton.vue';\nimport tmSearch from '@/tm-vuetify/components/tm-search/tm-search.vue';\nimport tmDropDownMenu from '@/tm-vuetify/components/tm-dropDownMenu/tm-dropDownMenu.vue';\nimport tmEmpty from '@/tm-vuetify/components/tm-empty/tm-empty.vue';\nimport tmButton from '@/tm-vuetify/components/tm-button/tm-button.vue';\nimport tmCheckbox from '@/tm-vuetify/components/tm-checkbox/tm-checkbox.vue';\nimport tmTranslate from '@/tm-vuetify/components/tm-translate/tm-translate.vue';\nimport tmPoup from '@/tm-vuetify/components/tm-poup/tm-poup.vue';\nimport tmForm from '@/tm-vuetify/components/tm-form/tm-form.vue';\nimport tmUpload from '@/tm-vuetify/components/tm-upload/tm-upload.vue';\nimport tmInput from '@/tm-vuetify/components/tm-input/tm-input.vue';\nimport tmImages from '@/tm-vuetify/components/tm-images/tm-images.vue';\nimport tmFlotbutton from '@/tm-vuetify/components/tm-flotbutton/tm-flotbutton.vue';\nimport tmActionSheetMenu from '@/tm-vuetify/components/tm-actionSheetMenu/tm-actionSheetMenu.vue';\n\nexport default {\n\tcomponents: {\n\t\ttmSkeleton,\n\t\ttmSearch,\n\t\ttmDropDownMenu,\n\t\ttmEmpty,\n\t\ttmButton,\n\t\ttmCheckbox,\n\t\ttmPoup,\n\t\ttmForm,\n\t\ttmUpload,\n\t\ttmInput,\n\t\ttmImages,\n\t\ttmFlotbutton,\n\t\ttmTranslate,\n\t\ttmActionSheetMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: 'loading',\n\t\t\tfilterLoading: 'loading',\n\t\t\tbtnOption: {\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'icon-like',\n\t\t\t\t\t\tcolor: 'bg-gradient-orange-accent'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'icon-commentdots-fill',\n\t\t\t\t\t\tcolor: 'bg-gradient-green-accent'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'icon-share1',\n\t\t\t\t\t\tcolor: 'bg-gradient-blue-accent'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tfilterList: [\n\t\t\t\t{\n\t\t\t\t\ttitle: '存储位置',\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tname: 'attachmentType',\n\t\t\t\t\t\t\tmodel: 'radio',\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '文件类型',\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tname: 'mediaType',\n\t\t\t\t\t\t\tmodel: 'radio',\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\tqueryParams: {\n\t\t\t\tsize: 8,\n\t\t\t\tpage: 0,\n\t\t\t\tattachmentType: undefined,\n\t\t\t\tkeyword: undefined,\n\t\t\t\tmediaType: undefined,\n\t\t\t\tsort: undefined\n\t\t\t},\n\t\t\tresult: {},\n\t\t\tdataList: [],\n\t\t\ttotal: 0,\n\t\t\tdetail: {\n\t\t\t\tparams: {},\n\t\t\t\tform: {},\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\tisLoadMore: false,\n\t\t\tloadMoreText: '加载中...',\n\n\t\t\tfileSelectAction: {\n\t\t\t\tshow: false,\n\t\t\t\tlist: []\n\t\t\t}\n\t\t};\n\t},\n\n\tonLoad() {\n\t\tthis.fnSetPageTitle('附件管理');\n\t},\n\tcreated() {\n\t\tthis.fnGetData();\n\t\tthis.fnGetFilters();\n\t},\n\tonPullDownRefresh() {\n\t\tthis.queryParams.page = 0;\n\t\tthis.dataList = [];\n\t\tthis.fnGetData();\n\t\tif (this.filterLoading != 'success') {\n\t\t\tthis.fnGetFilters();\n\t\t}\n\t},\n\tonReachBottom(e) {\n\t\tif (this.result.hasNext) {\n\t\t\tthis.queryParams.page += 1;\n\t\t\tthis.isLoadMore = true;\n\t\t\tthis.fnGetData();\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: '没有更多数据了'\n\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 文件大小 字节转换单位\n\t\t * @param size\n\t\t * @returns {string|*}\n\t\t */\n\t\tfnTransFileSize(size) {\n\t\t\tif (!size) return '';\n\t\t\tif (size < this.fnPow1024(1)) return size + ' B';\n\t\t\tif (size < this.fnPow1024(2)) return (size / this.fnPow1024(1)).toFixed(2) + ' KB';\n\t\t\tif (size < this.fnPow1024(3)) return (size / this.fnPow1024(2)).toFixed(2) + ' MB';\n\t\t\tif (size < this.fnPow1024(4)) return (size / this.fnPow1024(3)).toFixed(2) + ' GB';\n\t\t\treturn (size / this.fnPow1024(4)).toFixed(2) + ' TB';\n\t\t},\n\n\t\t// 求次幂\n\t\tfnPow1024(num) {\n\t\t\treturn Math.pow(1024, num);\n\t\t},\n\n\t\tfnGetIconClass(mediaType) {\n\t\t\tlet _class = '';\n\t\t\tif (mediaType.indexOf('video/') != -1) {\n\t\t\t\t_class = 'is-video';\n\t\t\t} else if (mediaType.indexOf('image/') != -1) {\n\t\t\t\t_class = 'is-image';\n\t\t\t}\n\t\t\treturn _class;\n\t\t},\n\t\tfnCheckIsFileType(type, attachment) {\n\t\t\tif (type == 'video') return attachment.mediaType.indexOf('video/') != -1;\n\t\t\telse if (type == 'image') return attachment.mediaType.indexOf('image/') != -1;\n\t\t\telse return false;\n\t\t},\n\t\tfnGetFilters() {\n\t\t\tthis.filterLoading = 'loading';\n\t\t\tPromise.all([this.$httpApi.admin.getAttachmentsTypes(), this.$httpApi.admin.getAttachmentsMediaTypes()])\n\t\t\t\t.then(res => {\n\t\t\t\t\tconst res1 = res[0];\n\t\t\t\t\tthis.filterList[0].children[0].children = res1.data.map(item => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttitle: item,\n\t\t\t\t\t\t\tid: item\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tconst res2 = res[1];\n\t\t\t\t\tthis.filterList[1].children[0].children = res2.data.map(item => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttitle: item,\n\t\t\t\t\t\t\tid: item\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tthis.filterLoading = 'success';\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.filterLoading = 'error';\n\t\t\t\t\tuni.$tm.toast('搜索条件数据加载失败！');\n\t\t\t\t});\n\t\t},\n\n\t\t// 搜索区域确定\n\t\tfnOnConfirm(e) {\n\t\t\tthis.queryParams.attachmentType = e[0].children.map(x => x.id).join('') || undefined;\n\t\t\tthis.queryParams.mediaType = e[1].children.map(x => x.id).join('') || undefined;\n\t\t\tthis.fnOnSearch();\n\t\t},\n\t\tfnOnSearch() {\n\t\t\tthis.queryParams.page = 0;\n\t\t\tthis.dataList = [];\n\t\t\tthis.fnGetData();\n\t\t},\n\n\t\tfnGetData() {\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true,\n\t\t\t\ttitle: '加载中...'\n\t\t\t});\n\t\t\t// 设置状态为加载中\n\t\t\tif (!this.isLoadMore) {\n\t\t\t\tthis.loading = 'loading';\n\t\t\t}\n\t\t\tthis.loadMoreText = '加载中...';\n\t\t\tthis.$httpApi.admin\n\t\t\t\t.getAttachmentsByPage(this.queryParams)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\tthis.loadMoreText = res.data.hasNext ? '上拉加载更多' : '呜呜，没有更多数据啦~';\n\t\t\t\t\t\tthis.result = res.data;\n\t\t\t\t\t\tthis.total = res.data.total;\n\t\t\t\t\t\tif (this.isLoadMore) {\n\t\t\t\t\t\t\tlet _list = this.dataList.concat(res.data.content);\n\t\t\t\t\t\t\tthis.dataList = _list.map(item => {\n\t\t\t\t\t\t\t\titem['sizeText'] = this.fnTransFileSize(item.size);\n\t\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.dataList = res.data.content.map(item => {\n\t\t\t\t\t\t\t\titem['sizeText'] = this.fnTransFileSize(item.size);\n\t\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.loading = 'success';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.$tm.toast('加载失败，请重试！');\n\t\t\t\t\t\tthi.loading = 'error';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tuni.$tm.toast('加载失败，请重试！');\n\t\t\t\t\tthis.loading = 'error';\n\t\t\t\t\tthis.loadMoreText = '加载失败，请下拉刷新！';\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\t\t}, 300);\n\t\t\t\t});\n\t\t},\n\n\t\t// 详情\n\t\tfnShowDetail(item) {\n\t\t\tthis.detail.params = { ...item };\n\t\t\tthis.detail.form = { ...item };\n\t\t\tthis.detail.show = true;\n\t\t},\n\t\t// 删除\n\t\tfnOnDelete() {\n\t\t\tuni.$eShowModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: `您确定要删除该附件吗？`,\n\t\t\t\tshowCancel: true,\n\t\t\t\tcancelText: '否',\n\t\t\t\tcancelColor: '#999999',\n\t\t\t\tconfirmText: '是',\n\t\t\t\tconfirmColor: '#03a9f4'\n\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\ttitle: '正在删除...'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$httpApi.admin\n\t\t\t\t\t\t.deleteAttachmentById(this.detail.params.id)\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\t\t\tuni.$tm.toast('删除成功！');\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.detail.show = false;\n\t\t\t\t\t\t\t\t\tthis.detail.params = {};\n\t\t\t\t\t\t\t\t\tthis.detail.form = {};\n\t\t\t\t\t\t\t\t\tthis.fnGetData();\n\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.$tm.toast('删除失败，请重试！');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\tuni.$tm.toast('删除失败，请重试！');\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => {});\n\t\t},\n\t\tfnOnUpdate() {\n\t\t\tif (this.detail.form.name == '') {\n\t\t\t\treturn uni.$tm.toast('附件名称不能为空！');\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true,\n\t\t\t\ttitle: '正在保存...'\n\t\t\t});\n\t\t\tthis.$httpApi.admin\n\t\t\t\t.updateAttachmentById(this.detail.params.id, this.detail.form.name)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\tuni.$tm.toast('保存成功！');\n\n\t\t\t\t\t\t// setTimeout(() => {\n\t\t\t\t\t\t// \tthis.detail.show = false;\n\t\t\t\t\t\t// \tthis.detail.params = {};\n\t\t\t\t\t\t// \tthis.detail.form = {};\n\t\t\t\t\t\t// \tthis.fnGetData();\n\t\t\t\t\t\t// }, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.$tm.toast('保存失败，请重试！');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tuni.$tm.toast('保存失败，请重试！');\n\t\t\t\t});\n\t\t},\n\t\t// 浮动按钮点击\n\t\tfnOnFlotButton() {\n\t\t\t// 微信小程序：提供从消息列表和媒体选择\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\tthis.fileSelectAction.list = ['上传照片', '上传视频', '上传文件'];\n\t\t\t// #endif\n\n\t\t\t// 安卓app：使用第三方上传\n\t\t\t// #ifdef APP-PLUS\n\t\t\tthis.fileSelectAction.list = ['上传照片', '上传视频', '上传文件'];\n\t\t\t// #endif\n\n\t\t\t// h5\n\t\t\t// #ifdef H5\n\t\t\tthis.fileSelectAction.list = ['上传照片', '上传视频', '上传文件'];\n\t\t\t// #endif\n\n\t\t\t// #ifndef H5||MP-WEIXIN||APP-PLUS\n\t\t\tthis.fileSelectAction.list = ['上传照片', '上传视频'];\n\t\t\t// #endif\n\n\t\t\tthis.fileSelectAction.show = true;\n\t\t},\n\t\tfnOnFileSelectActionChange(e) {\n\t\t\t// 微信小程序：提供从消息列表和媒体选择\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\tswitch (e.index) {\n\t\t\t\tcase 0:\n\t\t\t\t\t// 上传照片\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePaths[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t// 上传视频\n\t\t\t\t\tuni.chooseVideo({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\t// 会话选择\n\t\t\t\t\tuni.chooseMessageFile({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFiles[0].path);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// #endif\n\n\t\t\t// 安卓app\n\t\t\t// #ifdef APP-PLUS\n\t\t\tswitch (e.index) {\n\t\t\t\tcase 0:\n\t\t\t\t\t// 上传照片\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePaths[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t// 上传视频\n\t\t\t\t\tuni.chooseVideo({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\t// 上传文件：\n\t\t\t\t\t// todo:使用第三方控件\n\t\t\t\t\tAfDocument.openMode(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsize: 1,\n\t\t\t\t\t\t\tisDown: true,\n\t\t\t\t\t\t\ttypes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: '文档',\n\t\t\t\t\t\t\t\t\tvalue: ['doc', 'wps', 'docx', 'xls', 'xlsx', 'pdf']\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: '视频',\n\t\t\t\t\t\t\t\t\tvalue: ['mp4']\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: '音乐',\n\t\t\t\t\t\t\t\t\tvalue: ['mp3', 'flac']\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: '图片',\n\t\t\t\t\t\t\t\t\tvalue: ['jpg', 'png']\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tres => {\n\t\t\t\t\t\t\t// this.data = JSON.stringify(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByFile(res[0].path);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// #endif\n\n\t\t\t// h5\n\t\t\t// #ifdef H5\n\t\t\tswitch (e.index) {\n\t\t\t\tcase 0:\n\t\t\t\t\t// 上传照片\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePaths[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t// 上传视频\n\t\t\t\t\tuni.chooseVideo({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\t// 上传文件\n\t\t\t\t\tuni.chooseFile({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tthis.fnOnUploadFileByPath(res.tempFilePaths[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// #endif\n\n\t\t\t// #ifndef H5||MP-WEIXIN||APP-PLUS\n\t\t\tswitch (e.index) {\n\t\t\t\tcase 0:\n\t\t\t\t\t// 上传照片\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tthis.fnOnUploadFileByFile(res.tempFiles[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t// 上传视频\n\t\t\t\t\tuni.chooseVideo({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tthis.fnOnUploadFileByFile(res.tempFile);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// #endif\n\t\t},\n\n\t\t// 使用文件路径上传文件\n\t\tfnOnUploadFileByPath(path) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '文件上传中...',\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tuni.uploadFile({\n\t\t\t\tfilePath: path,\n\t\t\t\theader: {\n\t\t\t\t\t'admin-authorization': getAdminAccessToken()\n\t\t\t\t},\n\t\t\t\turl: this.$baseApiUrl + '/api/admin/attachments/upload',\n\t\t\t\tname: 'file',\n\t\t\t\tsuccess: upladRes => {\n\t\t\t\t\tconst _uploadRes = JSON.parse(upladRes.data);\n\t\t\t\t\tif (_uploadRes.status == 200) {\n\t\t\t\t\t\tuni.$tm.toast('文件上传成功！');\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.fnGetData();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.$tm.toast(_uploadRes.message);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tuni.$tm.toast(err.message);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 使用文件对象上传文件\n\t\tfnOnUploadFileByFile(file) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '文件上传中...',\n\t\t\t\tmask: true\n\t\t\t});\n\n\t\t\tuni.uploadFile({\n\t\t\t\t// #ifdef H5\n\t\t\t\tfile: file,\n\t\t\t\t// #endif\n\t\t\t\t// #ifndef H5\n\t\t\t\tfiles: [file],\n\t\t\t\t// #endif\n\t\t\t\theader: {\n\t\t\t\t\t'admin-authorization': getAdminAccessToken()\n\t\t\t\t},\n\t\t\t\turl: this.$baseApiUrl + '/api/admin/attachments/upload',\n\t\t\t\tname: 'file',\n\t\t\t\tsuccess: upladRes => {\n\t\t\t\t\tconst _uploadRes = JSON.parse(upladRes.data);\n\t\t\t\t\tif (_uploadRes.status == 200) {\n\t\t\t\t\t\tuni.$tm.toast('文件上传成功！');\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.fnGetData();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.$tm.toast(_uploadRes.message);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tuni.$tm.toast(err.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.app-page {\n\twidth: 100vw;\n\tmin-height: 100vh;\n}\n.loading-wrap {\n\tpadding: 24rpx;\n}\n.filter-wrap {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\t/* #ifdef H5 */\n\ttop: 88rpx;\n\t/* #endif */\n\t/* #ifndef H5 */\n\ttop: 0;\n\t/* #endif */\n\twidth: 100vw;\n\tz-index: 6;\n}\n.page-content {\n}\n.content-empty {\n\twidth: 100vw;\n\theight: 65vh;\n}\n.attachment-card {\n\tbox-shadow: 0rpx 2rpx 24rpx rgba(0, 0, 0, 0.05);\n\t.cover {\n\t\twidth: 170rpx;\n\t\theight: 160rpx;\n\t\tbackground-color: rgb(104, 136, 151);\n\t\t// box-shadow: 0 6rpx 10rpx rgba(51, 154, 204, 0.2);\n\t\t&.is-video {\n\t\t\tbackground-color: rgb(3, 174, 252);\n\t\t}\n\t\t&.is-image {\n\t\t\tbackground-color: #1cbcb4;\n\t\t}\n\t\t.icon {\n\t\t\tfont-size: 40rpx;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t.thumbnai {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbox-sizing: border-box;\n\t\t\tbox-shadow: 0rpx 4rpx 24rpx rgba(0, 0, 0, 0.03);\n\t\t\tborder: 6rpx solid #fff;\n\t\t}\n\t}\n\t.info {\n\t\twidth: 0;\n\t\tflex-grow: 1;\n\n\t\t.time-icon {\n\t\t\tfont-size: 24rpx;\n\t\t}\n\t}\n}\n\n.poup-body {\n\tbox-sizing: border-box;\n\theight: 66vh;\n}\n.poup-content {\n\twidth: 100%;\n\toverflow: hidden;\n}\n.btn-wrap {\n\twidth: 100%;\n}\n.file-name {\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./attachment.vue?vue&type=style&index=0&id=f1938268&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./attachment.vue?vue&type=style&index=0&id=f1938268&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675514567934\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}